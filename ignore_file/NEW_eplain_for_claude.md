## **會議日期：** 0805 21:00PM

## **主題：** 專案製作與 PDF 圖表處理策略討論

---

### **一、PDF 類型的區分**

1. **PDF 分為兩種類型：**

   * **Digital PDF（數位 PDF）：** 由電子檔案直接轉換為 PDF。
   * **Scanned PDF（掃描 PDF）：** 由紙本文件掃描生成的圖像式 PDF。

2. **會議決定：**

   * 老師建議目前**專注於 Digital PDF**，不處理 Scanned PDF，以降低開發難度並聚焦專案目標。
   * 未來若有需要，再考慮擴展至 Scanned PDF 的處理。

---

### **二、圖表處理的初步構想（原方案）**

1. **原本想法：**

   * 直接從 PDF 中抽取圖表 → 送入 **LM API** → 產生圖表的解釋文字。
   * 再透過 **RAG 系統**將解釋文字切分並向量化。
   * 學生提問時，搜尋相關向量 Chunk 並調出圖表（圖像）。

2. **問題點：**

   * 直接抽取與處理圖像較為複雜，且圖像與內文關聯性較弱。

---

### **三、老師建議的改進方案（新方案，優先實作）**

1. **核心概念：**

   * 利用 PDF 內文中的**圖表說明文字（Caption）**與**正文中提及圖表的關鍵段落**（如「如圖一」）。
   * 將 Caption 與相關內文結合，送入 LM API，生成更完整的圖表描述。

2. **具體流程：**

   1. **自動分段：**

      * 使用既有的 **LangChain + RAG 架構**，將 PDF 內文自動切割為 Chunk。
   2. **圖文配對：**

      * 尋找內文中含有「如圖一」等關鍵字的 Chunk。
      * 將這些 Chunk 與對應的圖表 Caption 進行配對。
   3. **圖轉文字：**

      * 將 Caption + 相關內文送入 LM API，生成圖表的完整描述文字。
   4. **文檔重組：**

      * 以生成的描述文字取代 PDF 中原本的圖像資訊，使 PDF 內容更接近純文字形式。
   5. **再向量化：**

      * 將「文字化後的 PDF」送入 RAG 系統進行 Chunk 切分與向量化。
   6. **搜尋與展示：**

      * 學生提問時，若結果包含圖表描述文字，則同時調出該描述對應的**原始圖表**一併顯示。
      * 把「圖表（圖片）」變成可檢索的文字段落，和原 PDF 文字一起進向量庫／全文索引；命中時，回傳描述文字 + 原圖連結/頁碼。(伴生索引（sidecar index） )

3. **優點：**

   * 避免複雜的圖像解析，直接透過文字上下文（Caption + 內文）來描述圖表。
   * 保留圖文關聯性，並在問答時可動態呈現圖片。

---

### **四、其他可選方案**

* 老師提到另一種替代方法，但細節尚未展開。
* 目前決定**優先實作上述方案**，若時間允許，再開分支嘗試其他方法並比較效果。

---

### **結論與後續任務**

1. **確定重點：**

   * 以「**Caption + 內文 → LM API → 圖表文字描述 → 向量化**」作為主要流程。
   * 專注於 Digital PDF，暫不處理 Scanned PDF。

2. **後續工作：**

   * 實作 PDF 自動分段、圖文配對及描述生成流程。
   * 將生成的圖表描述納入向量化與檢索機制。
   * 設計問答時同時顯示圖表描述與原圖的呈現邏輯。


---------------------------------------

正在嘗試 https://aws.amazon.com/cn/blogs/china/automated-rag-project-assessment-testing-using-trulens/
https://hackmd.io/@YungHuiHsu/H16Y5cdi6#%E8%A9%95%E4%BC%B0%E6%96%B9%E6%B3%95%E7%9A%84%E5%9B%9E%E9%A5%8B%E5%93%81%E8%B3%AA%E6%84%8F%E7%BE%A9%E6%80%A7%E4%B8%8AMeaningful%E5%92%8C%E5%9F%B7%E8%A1%8C%E8%A9%95%E4%BC%B0%E7%9A%84%E6%98%93%E8%A1%8C%E6%80%A7%E5%8F%AF%E6%93%B4%E5%B1%95%E6%80%A7Scalable

用來評估 RAG 測試
